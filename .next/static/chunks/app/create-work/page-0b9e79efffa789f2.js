(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{8893:function(e,t,o){Promise.resolve().then(o.bind(o,8239))},8239:function(e,t,o){"use strict";o.r(t);var r=o(7437),a=o(2265),n=o(4639),s=o(2921),i=o(2749),u=o(4033);t.default=()=>{let{data:e}=(0,i.useSession)(),t=(0,u.useRouter)(),[o,l]=(0,a.useState)({creator:"",category:"",title:"",description:"",price:"",photos:[]});if(e){var c;o.creator=null==e?void 0:null===(c=e.user)||void 0===c?void 0:c._id}let d=async r=>{r.preventDefault();try{let r=new FormData;for(var a in o)r.append(a,o[a]);o.photos.forEach(e=>{r.append("workPhotoPaths",e)});let s=await fetch("/api/work/new",{method:"POST",body:r});if(s.ok){var n;t.push("/shop?id=".concat(null==e?void 0:null===(n=e.user)||void 0===n?void 0:n._id))}}catch(e){console.log("Publish Work failed",e.message)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.default,{}),(0,r.jsx)(n.Z,{type:"Create",work:o,setWork:l,handleSubmit:d})]})}}},function(e){e.O(0,[115,400,749,437,149,971,472,744],function(){return e(e.s=8893)}),_N_E=e.O()}]);