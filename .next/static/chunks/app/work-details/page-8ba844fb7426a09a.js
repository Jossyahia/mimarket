(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{2666:function(s,e,r){"use strict";var i=r(9782),t=r(7437);e.Z=(0,i.Z)((0,t.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew")},3625:function(s,e,r){"use strict";var i=r(9782),t=r(7437);e.Z=(0,i.Z)((0,t.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos")},5717:function(s,e,r){"use strict";var i=r(9782),t=r(7437);e.Z=(0,i.Z)((0,t.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite")},2113:function(s,e,r){"use strict";var i=r(9782),t=r(7437);e.Z=(0,i.Z)((0,t.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder")},6012:function(s,e,r){Promise.resolve().then(r.bind(r,6697))},6697:function(s,e,r){"use strict";r.r(e),r.d(e,{default:function(){return v}});var i=r(7437);r(6340);var t=r(4033),a=r(2265),l=r(4642),c=r(2921),n=(0,r(9782).Z)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),o=r(5717),d=r(2113),h=r(2666),u=r(3625),x=r(3700),j=r(2749),v=()=>{var s,e,r,v,m,f,p;let[g,k]=(0,a.useState)(!0),[w,C]=(0,a.useState)({}),N=(0,t.useSearchParams)(),Z=N.get("id");(0,a.useEffect)(()=>{let s=async()=>{let s=await fetch("api/work/".concat(Z),{method:"GET"}),e=await s.json();C(e),k(!1)};Z&&s()},[Z]);let{data:y,update:P}=(0,j.useSession)(),S=null==y?void 0:null===(s=y.user)||void 0===s?void 0:s._id,[_,b]=(0,a.useState)(0),z=()=>{b(s=>(s+1)%w.workPhotoPaths.length)},L=()=>{b(s=>(s-1+w.workPhotoPaths.length)%w.workPhotoPaths.length)},[O,E]=(0,a.useState)(5),[M,T]=(0,a.useState)(0),A=s=>{T(s),b(s)},I=(0,t.useRouter)(),F=null==y?void 0:null===(e=y.user)||void 0===e?void 0:e.wishlist,D=null==F?void 0:F.find(s=>(null==s?void 0:s._id)===w._id),R=async()=>{let s=await fetch("api/user/".concat(S,"/wishlist/").concat(w._id),{method:"PATCH"}),e=await s.json();P({user:{wishlist:e.wishlist}})},B=null==y?void 0:null===(r=y.user)||void 0===r?void 0:r.cart,U=null==B?void 0:B.find(s=>(null==s?void 0:s.workId)===Z),W=async()=>{let s={workId:Z,image:w.workPhotoPaths[0],title:w.title,category:w.category,creator:w.creator,price:w.price,quantity:1};if(U){confirm("This item is already in your cart");return}{let e=[...B,s];try{await fetch("/api/user/".concat(S,"/cart"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:e})}),P({user:{cart:e}})}catch(s){console.log(s)}}};return console.log(null==y?void 0:null===(v=y.user)||void 0===v?void 0:v.cart),g?(0,i.jsx)(l.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.default,{}),(0,i.jsxs)("div",{className:"work-details",children:[(0,i.jsxs)("div",{className:"title",children:[(0,i.jsx)("h1",{children:w.title}),(null==w?void 0:null===(m=w.creator)||void 0===m?void 0:m._id)===S?(0,i.jsxs)("div",{className:"save",onClick:()=>{I.push("/update-work?id=".concat(Z))},children:[(0,i.jsx)(n,{}),(0,i.jsx)("p",{children:"Edit"})]}):(0,i.jsxs)("div",{className:"save",onClick:R,children:[D?(0,i.jsx)(o.Z,{sx:{color:"red"}}):(0,i.jsx)(d.Z,{}),(0,i.jsx)("p",{children:"Save"})]})]}),(0,i.jsx)("div",{className:"slider-container",children:(0,i.jsx)("div",{className:"slider",style:{transform:"translateX(-".concat(100*_,"%)")},children:null===(f=w.workPhotoPaths)||void 0===f?void 0:f.map((s,e)=>(0,i.jsxs)("div",{className:"slide",children:[(0,i.jsx)("img",{src:s,alt:"work"}),(0,i.jsx)("div",{className:"prev-button",onClick:s=>L(s),children:(0,i.jsx)(h.Z,{sx:{fontSize:"15px"}})}),(0,i.jsx)("div",{className:"next-button",onClick:s=>z(s),children:(0,i.jsx)(u.Z,{sx:{fontSize:"15px"}})})]},e))})}),(0,i.jsxs)("div",{className:"photos",children:[null===(p=w.workPhotoPaths)||void 0===p?void 0:p.slice(0,O).map((s,e)=>(0,i.jsx)("img",{src:s,alt:"work-demo",onClick:()=>A(e),className:M===e?"selected":""},e)),O<w.workPhotoPaths.length&&(0,i.jsxs)("div",{className:"show-more",onClick:()=>{E(w.workPhotoPaths.length)},children:[(0,i.jsx)(u.Z,{sx:{fontSize:"40px"}}),"Show More"]})]}),(0,i.jsx)("hr",{}),(0,i.jsxs)("div",{className:"profile",children:[(0,i.jsx)("img",{src:w.creator.profileImagePath,alt:"profile",onClick:()=>I.push("/shop?id=".concat(w.creator._id))}),(0,i.jsxs)("h3",{children:["Created by ",w.creator.username]})]}),(0,i.jsx)("hr",{}),(0,i.jsx)("h3",{children:"About this product"}),(0,i.jsx)("p",{children:w.description}),(0,i.jsxs)("h1",{children:["#",w.price]}),(0,i.jsxs)("button",{type:"submit",onClick:W,children:[(0,i.jsx)(x.Z,{}),"ADD TO CART"]})]})]})}},4642:function(s,e,r){"use strict";var i=r(7437);r(3572),e.Z=()=>(0,i.jsx)("div",{className:"loader",children:(0,i.jsx)("div",{className:"loader-inner"})})},2921:function(s,e,r){"use strict";r.r(e),r.d(e,{default:function(){return v}});var i=r(7437);r(6652);var t=r(98),a=r(3700),l=r(8457),c=r(6013),n=r(9617),o=r(2749),d=r(1396),h=r.n(d),u=r(2265),x=r(4033);r(72);var j=()=>(0,i.jsxs)("div",{className:"logo-holder logo-3",children:[(0,i.jsx)("h2",{children:"Mimarket"}),(0,i.jsx)("p",{children:"Delivering Dreams"})]}),v=()=>{let{data:s}=(0,o.useSession)(),e=null==s?void 0:s.user,[r,d]=(0,u.useState)(!1),v=async()=>{(0,o.signOut)({callbackUrl:"/"})},[m,f]=(0,u.useState)(""),p=(0,x.useRouter)(),g=async()=>{p.push("/search/".concat(m))},k=null==e?void 0:e.cart;return(0,i.jsxs)("div",{className:"navbar",children:[(0,i.jsx)("a",{href:"/",children:(0,i.jsx)(j,{})}),(0,i.jsxs)("div",{className:"navbar_search",children:[(0,i.jsx)("input",{type:"text",placeholder:"Search...",value:m,onChange:s=>f(s.target.value)}),(0,i.jsx)(n.Z,{disabled:""===m,onClick:g,children:(0,i.jsx)(t.Z,{sx:{color:"red"}})})]}),(0,i.jsxs)("div",{className:"navbar_right",children:[e&&(0,i.jsxs)("a",{href:"/cart",className:"cart",children:[(0,i.jsx)(a.Z,{sx:{color:"gray"}}),"Cart ",(0,i.jsxs)("span",{children:["(",null==k?void 0:k.length,")"]})]}),(0,i.jsxs)("div",{className:"navbar_right_account",children:[(0,i.jsx)(n.Z,{onClick:()=>d(!r),children:(0,i.jsx)(l.Z,{sx:{color:"gray"}})}),e?(0,i.jsx)(n.Z,{onClick:()=>d(!r),children:(0,i.jsx)("img",{src:e.profileImagePath,alt:"profile",style:{objectFit:"cover",borderRadius:"50%"}})}):(0,i.jsx)(n.Z,{onClick:()=>d(!r),children:(0,i.jsx)(c.Z,{sx:{color:"gray"}})})]}),r&&!e&&(0,i.jsxs)("div",{className:"navbar_right_accountmenu",children:[(0,i.jsx)(h(),{href:"/login",children:"Log In"}),(0,i.jsx)(h(),{href:"/register",children:"Sign Up"})]}),r&&e&&(0,i.jsxs)("div",{className:"navbar_right_accountmenu",children:[(0,i.jsx)(h(),{href:"/wishlist",children:"Wishlist"}),(0,i.jsx)(h(),{href:"/cart",children:"Cart"}),(0,i.jsx)(h(),{href:"/order",children:"Orders"}),(0,i.jsx)(h(),{href:"/shop?id=".concat(e._id),children:"Your Shop"}),(0,i.jsx)(h(),{href:"/create-work",children:"Sell Your Work"}),(0,i.jsx)("a",{onClick:v,children:"Log Out"})]})]})]})}},3572:function(){},72:function(){},6652:function(){},6340:function(){}},function(s){s.O(0,[749,437,971,472,744],function(){return s(s.s=6012)}),_N_E=s.O()}]);