(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[796],{3068:function(e,t,o){Promise.resolve().then(o.bind(o,8805))},8805:function(e,t,o){"use strict";o.r(t);var a=o(7437),s=o(2921),i=o(4033),n=o(2265),r=o(4642),c=o(4639),l=o(2749);t.default=()=>{let{data:e}=(0,l.useSession)(),[t,o]=(0,n.useState)(!0),u=(0,i.useSearchParams)(),d=u.get("id"),[h,p]=(0,n.useState)({category:"",title:"",description:"",price:"",photos:[]});(0,n.useEffect)(()=>{let e=async()=>{let e=await fetch("api/work/".concat(d),{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();p({category:t.category,title:t.title,description:t.description,price:t.price,photos:t.workPhotoPaths}),o(!1)};d&&e()},[d]);let f=(0,i.useRouter)(),k=async t=>{t.preventDefault();try{let t=new FormData;for(var o in h)t.append(o,h[o]);h.photos.forEach(e=>{t.append("workPhotoPaths",e)});let s=await fetch("/api/work/".concat(d),{method:"PATCH",body:t});if(s.ok){var a;f.push("/shop?id=".concat(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a._id))}}catch(e){console.log("Publish Work failed",e.message)}};return t?(0,a.jsx)(r.Z,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.default,{}),(0,a.jsx)(c.Z,{type:"Edit",work:h,setWork:p,handleSubmit:k})]})}},4642:function(e,t,o){"use strict";var a=o(7437);o(3572),t.Z=()=>(0,a.jsx)("div",{className:"loader",children:(0,a.jsx)("div",{className:"loader-inner"})})},3572:function(){}},function(e){e.O(0,[115,400,749,437,149,971,472,744],function(){return e(e.s=3068)}),_N_E=e.O()}]);