"use strict";(()=>{var e={};e.id=278,e.ids=[278],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1003:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>w,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>h});var o={};t.r(o),t.d(o,{GET:()=>d});var a=t(10884),s=t(16132),i=t(21040),n=t(34581),u=t(52017),p=t(67859);let d=async(e,{params:r})=>{try{await (0,p.P)();let e=await u.Z.findById(r.id),t=await n.Z.find({creator:r.id}).populate("creator");return e.works=t,await e.save(),new Response(JSON.stringify({user:e,workList:t}),{status:200})}catch(e){return new Response("Failed to fetch work list by user",{status:500})}},c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/user/[id]/shop/route",pathname:"/api/user/[id]/shop",filename:"route",bundlePath:"app/api/user/[id]/shop/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\mimarket\\app\\api\\user\\[id]\\shop\\route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:y,serverHooks:m,headerHooks:g,staticGenerationBailout:h}=c,w="/api/user/[id]/shop/route";function f(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:y})}},52017:(e,r,t)=>{t.d(r,{Z:()=>i});var o=t(11185);let a=new o.Schema({username:{type:String,unique:[!0,"Username already exists"],required:[!0,"Username is required"]},email:{type:String,unique:[!0,"Email already exists"],required:[!0,"Email is required"]},password:{type:String},profileImagePath:{type:String,required:[!0,"Profile image is required"]},wishlist:{type:Array,default:[]},cart:{type:Array,default:[]},orders:{type:Array,default:[]},works:{type:Array,default:[]}}),s=o.models.User||(0,o.model)("User",a),i=s},34581:(e,r,t)=>{t.d(r,{Z:()=>i});var o=t(11185);let a=new o.Schema({creator:{type:o.Schema.Types.ObjectId,ref:"User"},category:{type:String},title:{type:String},description:{type:String},price:{type:Number},workPhotoPaths:[{type:String}]}),s=o.models.Work||(0,o.model)("Work",a),i=s},67859:(e,r,t)=>{t.d(r,{P:()=>i});var o=t(11185),a=t.n(o);let s=!1,i=async()=>{a().set("strictQuery",!0);try{if(s){console.log("MongoDB is already connected!");return}await a().connect(process.env.MONGO),s=!0,console.log("MongoDB connected")}catch(e){throw s=!1,console.error("MongoDB connection error:",e.message),Error("MongoDB connection error")}}},10884:(e,r,t)=>{e.exports=t(30517)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[271],()=>t(1003));module.exports=o})();