"use strict";(()=>{var e={};e.id=514,e.ids=[514],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7337:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>g});var i={};t.r(i),t.d(i,{PATCH:()=>u});var s=t(10884),o=t(16132),a=t(21040),n=t(34581),d=t(52017),l=t(67859);let u=async(e,{params:r})=>{try{await (0,l.P)();let e=r.id,t=r.workId,i=await d.Z.findById(e),s=await n.Z.findById(t).populate("creator"),o=i.wishlist.find(e=>e._id.toString()===t);if(o)return i.wishlist=i.wishlist.filter(e=>e._id.toString()!==t),await i.save(),new Response(JSON.stringify({message:"Work removed from wishlist",wishlist:i.wishlist}),{status:200});return i.wishlist.push(s),await i.save(),new Response(JSON.stringify({message:"Work added to wishlist",wishlist:i.wishlist}),{status:200})}catch(e){return console.log(e),new Response("Failed to patch work to wishlist",{status:500})}},p=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/user/[id]/wishlist/[workId]/route",pathname:"/api/user/[id]/wishlist/[workId]",filename:"route",bundlePath:"app/api/user/[id]/wishlist/[workId]/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\mimarket\\app\\api\\user\\[id]\\wishlist\\[workId]\\route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:w,serverHooks:h,headerHooks:y,staticGenerationBailout:g}=p,m="/api/user/[id]/wishlist/[workId]/route";function f(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:w})}},52017:(e,r,t)=>{t.d(r,{Z:()=>a});var i=t(11185);let s=new i.Schema({username:{type:String,unique:[!0,"Username already exists"],required:[!0,"Username is required"]},email:{type:String,unique:[!0,"Email already exists"],required:[!0,"Email is required"]},password:{type:String},profileImagePath:{type:String,required:[!0,"Profile image is required"]},wishlist:{type:Array,default:[]},cart:{type:Array,default:[]},orders:{type:Array,default:[]},works:{type:Array,default:[]}}),o=i.models.User||(0,i.model)("User",s),a=o},34581:(e,r,t)=>{t.d(r,{Z:()=>a});var i=t(11185);let s=new i.Schema({creator:{type:i.Schema.Types.ObjectId,ref:"User"},category:{type:String},title:{type:String},description:{type:String},price:{type:Number},workPhotoPaths:[{type:String}]}),o=i.models.Work||(0,i.model)("Work",s),a=o},67859:(e,r,t)=>{t.d(r,{P:()=>a});var i=t(11185),s=t.n(i);let o=!1,a=async()=>{s().set("strictQuery",!0);try{if(o){console.log("MongoDB is already connected!");return}await s().connect(process.env.MONGO),o=!0,console.log("MongoDB connected")}catch(e){throw o=!1,console.error("MongoDB connection error:",e.message),Error("MongoDB connection error")}}},10884:(e,r,t)=>{e.exports=t(30517)}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[271],()=>t(7337));module.exports=i})();