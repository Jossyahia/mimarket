"use strict";(()=>{var e={};e.id=458,e.ids=[458],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55281:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>w,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>h});var o={};t.r(o),t.d(o,{GET:()=>p});var n=t(10884),a=t(16132),s=t(21040),i=t(34581),c=t(67859);let p=async(e,{params:r})=>{try{await (0,c.P)();let{query:e}=r,t=[];if(!(t="all"===e?await i.Z.find().populate("creator"):await i.Z.find({$or:[{category:{$regex:e,$options:"i"}},{title:{$regex:e,$options:"i"}}]}).populate("creator")))return new Response("No works found",{status:404});return new Response(JSON.stringify(t),{status:200})}catch(e){return console.log(e),new Response("Internal server error",{status:500})}},u=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/work/search/[query]/route",pathname:"/api/work/search/[query]",filename:"route",bundlePath:"app/api/work/search/[query]/route"},resolvedPagePath:"C:\\Users\\HP\\Desktop\\mimarket\\app\\api\\work\\search\\[query]\\route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:g,headerHooks:y,staticGenerationBailout:h}=u,w="/api/work/search/[query]/route";function m(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}},34581:(e,r,t)=>{t.d(r,{Z:()=>s});var o=t(11185);let n=new o.Schema({creator:{type:o.Schema.Types.ObjectId,ref:"User"},category:{type:String},title:{type:String},description:{type:String},price:{type:Number},workPhotoPaths:[{type:String}]}),a=o.models.Work||(0,o.model)("Work",n),s=a},67859:(e,r,t)=>{t.d(r,{P:()=>s});var o=t(11185),n=t.n(o);let a=!1,s=async()=>{n().set("strictQuery",!0);try{if(a){console.log("MongoDB is already connected!");return}await n().connect(process.env.MONGO),a=!0,console.log("MongoDB connected")}catch(e){throw a=!1,console.error("MongoDB connection error:",e.message),Error("MongoDB connection error")}}},10884:(e,r,t)=>{e.exports=t(30517)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[271],()=>t(55281));module.exports=o})();